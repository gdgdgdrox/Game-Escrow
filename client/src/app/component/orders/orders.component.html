<div class="tabs-container">
  <mat-tab-group>
    <mat-tab label="Pending Action">
      <mat-list role="list">
        @for(transaction of transactionsPendingUserAction; track
        transaction.transactionID){
        <mat-list-item role="listitem" class="list-item" [routerLink]="['/transaction-parent', transaction.transactionID]">
          <div class="list-content">
            <img [src]="transaction.game.gameImagePath" alt="game" class="game-image"/>
            <div class="transaction-info">
              <span class="game-name">{{ transaction.game.gameName }}</span>
              <span class="transaction-id">Transaction ID {{ transaction.transactionID }}</span>
              <span class="counterparty">{{transaction.buyer === loggedInUser ? transaction.seller : transaction.buyer}}</span>
            </div>
          </div>
        </mat-list-item>
        }
      </mat-list>
    </mat-tab>
    <mat-tab label="Completed">
      <mat-list role="list">
        @for(transaction of transactionsCompleted; track
        transaction.transactionID){
        <mat-list-item
          role="listitem"
          class="list-item"
          [routerLink]="['/transaction-parent', transaction.transactionID]"
        >
          <div class="list-content">
            <img
              [src]="transaction.game.gameImagePath"
              alt="game"
              class="game-image"
            />
            <div class="transaction-info">
              <span class="game-name">{{ transaction.game.gameName }}</span>
              <span class="transaction-id"
                >Transaction ID {{ transaction.transactionID }}</span
              >
              <span class="completed-date">{{
                transaction.transactionSteps.transactionStep4.completedDate| date }}</span>
            </div>
          </div>
        </mat-list-item>
        }
      </mat-list>
    </mat-tab>
    <mat-tab label="All">
      <mat-list role="list">
        @for(transaction of transactions; track transaction.transactionID){
        <mat-list-item
          role="listitem"
          class="list-item"
          [routerLink]="['/transaction-parent', transaction.transactionID]"
        >
          <div class="list-content">
            <img
              [src]="transaction.game.gameImagePath"
              alt="game"
              class="game-image"
            />
            <div class="transaction-info">
              <span class="game-name">{{ transaction.game.gameName }}</span>
              <span class="transaction-id"
                >Transaction ID {{ transaction.transactionID }}</span
              >
              <span class="status">
                @if(transaction.currentStep === 2){
                  pending accept trade
                }
                @else if (transaction.currentStep === 3){
                  pending buyer pay escrow
                }
                @else if (transaction.currentStep === 4){
                  pending buyer confirmation
                }
                @else if (transaction.currentStep === 5){
                  completed
                }
              </span>
            </div>
          </div>
        </mat-list-item>
        }
      </mat-list>
    </mat-tab>
  </mat-tab-group>
</div>
